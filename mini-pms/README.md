# 30-a. 파일 입출력 API를 활용하여 데이터를 읽고 쓰기 : CSV 파일 포맷

이번 훈련에서는 **파일 입출력 API** 를 활용하여 데이터를 파일로 저장하고
파일에서 데이터를 읽는 것을 연습할 것이다.

지금까지,
- 사용자가 입력한 데이터를 컬렉션 객체에 저장했다.
- 즉 RAM에 데이터가 저장되어 있어서 프로그램을 종료하거나 컴퓨터를 끄면 데이터가 지워지는 문제가 있었다.

프로그램을 종료하더라도 데이터가 지워지지 않게 하려면,
- 외부 저장장치(예: 하드 디스크, SSD 등)에 저장해야 한다.
- 즉 데이터를 파일로 출력해야 한다.

**파일 입출력 API** 는,
- 데이터를 파일로 입출력하는 다양한 도구(*클래스*, *인터페이스*)를 제공한다.


**CSV 파일 포맷** 은,

- **Comma-Seperated Values** 의 약자이다.
- 확장자는 `.csv` 를 사용한다.
- MIME 형식은 `text/csv` 로 표현한다.
- 각 레코드(한 단위의 값)는 한 줄의 문자열로 표현한다.
- 한 줄은 줄바꿈 기호(CRLF)로 구분한다.
- 레코드를 구성하는 필드는 콤마(,)로 구분한다.
```csv
aaa, bbb, ccc (CRLF)
```
- 각 필드는 큰 따옴표를 쳐도 되고 안쳐도 된다.
```csv
aaa, "bbb", ccc (CRLF)
```
- 파일에 저장할 때 마지막 레코드는 줄바꿈 기호가 있을 수도 있고 없을 수도 있다.
``` csv
aaa, bbb, ccc (CRLF)
aaa, bbb, ccc (CRLF)
aaa, bbb, ccc
```
- CSV에 대한 자세한 정의는 [RFC 4180](https://tools.ietf.org/html/rfc4180) 명세에 있다.


**레코드(record)** 는

- 컴퓨터 과학에서 한 단위의 정보를 가리키는 용어다.
  - 예) 학생정보, 성적정보, 도서정보, 주문정보, 결제정보, 고객정보 등
- 한 개의 이상의 필드(field)로 구성된다.
  - 예) 학생정보: 이름, 전화번호, 나이, 우편번호, 주소, 이메일, 암호 등
- 객체지향 프로그래밍에서 레코드는 보통 클래스로 정의한다.
```java
class Student { // 학생 정보
  ...
}
```
- 필드는 클래스의 인스턴스 필드로 정의한다.
```java
class Student {
    String name; // 이름
    String tel; // 전화번호
    int age; // 나이
    String email; // 이메일
}
```

## 훈련 목표

- 파일 입출력 API를 활용하여 데이터를 파일로 입출력 하는 방법을 연습한다.
- 파일 입출력 API에 적용된 `Decorator` 디자인 패턴의 특징과 이점을 이해한다.


## 훈련 내용

- 사용자가 입력한 게시글, 회원, 프로젝트, 작업 데이터를 파일로 저장하고 파일에서 읽는다.


## 실습


### 1단계 - 게시글 데이터를 파일에 보관한다.

- App 클래스
  - 애플리케이션을 실행했을 때 파일에서 게시글 데이터를 읽어오는 `loadBoards()`를 정의한다.
  - 애플리케이션을 종료할 때 게시글 데이터를 파일에 저장하는 `saveBoards()`를 정의한다.
  - 게시글 데이터를 저장할 List 객체는 위에서 만든 메서드에서 접근할 수 있도록 스태틱 필드로 전환한다.

#### 작업 파일

- com.eomcs.pms.App 변경
  - 백업: App01.java

### 2단계 - 회원 데이터를 파일에 보관한다.

- App 클래스
  - 애플리케이션을 실행했을 때 파일에서 회원 데이터를 읽어오는 `loadMembers()`를 정의한다.
  - 애플리케이션을 종료할 때 회원 데이터를 파일에 저장하는 `saveMembers()`를 정의한다.
  - 회원 데이터를 저장할 List 객체는 위에서 만든 메서드에서 접근할 수 있도록 스태틱 필드로 전환한다.

#### 작업 파일

- com.eomcs.pms.App 변경
  - 백업: App02.java


### 3단계 - 프로젝트 데이터를 파일에 보관한다.

- App 클래스
  - 애플리케이션을 실행했을 때 파일에서 프로젝트 데이터를 읽어오는 `loadProjects()`를 정의한다.
  - 애플리케이션을 종료할 때 프로젝트 데이터를 파일에 저장하는 `saveProjects()`를 정의한다.
  - 프로젝트 데이터를 저장할 List 객체는 위에서 만든 메서드에서 접근할 수 있도록 스태틱 필드로 전환한다.

#### 작업 파일

- com.eomcs.pms.App 변경
  - 백업: App03.java


### 4단계 - 작업 데이터를 파일에 보관한다.

- App 클래스
  - 애플리케이션을 실행했을 때 파일에서 작업 데이터를 읽어오는 `loadTasks()`를 정의한다.
  - 애플리케이션을 종료할 때 작업 데이터를 파일에 저장하는 `saveTasks()`를 정의한다.
  - 작업 데이터를 저장할 List 객체는 위에서 만든 메서드에서 접근할 수 있도록 스태틱 필드로 전환한다.

#### 작업 파일

- com.eomcs.pms.App 변경


## 실습 결과

- src/main/java/com/eomcs/pms/App.java 변경
